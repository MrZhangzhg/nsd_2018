ansible_django项目
1、安装必须的软件包
[root@room8pc16 ~]# source /opt/djenv/bin/activate
(djenv) [root@room8pc16 zzg_pypkgs]# pip install ansible_pkg/*
(djenv) [root@room8pc16 zzg_pypkgs]# pip install ansible-cmdb_pkgs/*
(djenv) [root@room8pc16 zzg_pypkgs]# pip install requests_pkgs/*
(djenv) [root@room8pc16 zzg_pypkgs]# pip install sqlalchemy_pkgs/*
2、创建项目
(djenv) [root@room8pc16 ansible_project]# django-admin startproject myansible
(djenv) [root@room8pc16 ansible_project]# cd myansible/
3、修改pycharm:解释器、django支持
4、创建应用
(djenv) [root@room8pc16 myansible]# python manage.py startapp webansi
5、修改配置
# myansible/settings.py
ALLOWED_HOSTS = '*'
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'webansi',
]
LANGUAGE_CODE = 'zh-hans'
TIME_ZONE = 'Asia/Shanghai'
USE_TZ = False
6、生成数据库
(djenv) [root@room8pc16 myansible]# python manage.py makemigrations
(djenv) [root@room8pc16 myansible]# python manage.py migrate
(djenv) [root@room8pc16 myansible]# ls
db.sqlite3  manage.py  myansible  webansi
说明：sqlite是一个文件型数据库，一个文件就是一个库。
(djenv) [root@room8pc16 myansible]# sqlite3 db.sqlite3
sqlite> .help
sqlite> .tables   # 相当于是show tables
sqlite> .schema auth_user   # desc auth_user
sqlite> SELECT * FROM auth_user;
7、创建用户
(djenv) [root@room8pc16 myansible]# python manage.py createsuperuser
8、启动开发服务器测试
(djenv) [root@room8pc16 myansible]# python manage.py runserver 0:80


9、规划网址
http://127.0.0.1/  显示所有的功能
http://127.0.0.1/webansi/   应用首页，显示服务器的信息
http://127.0.0.1/webansi/addhosts/  显示、添加主机、主机组
http://127.0.0.1/webansi/addmodules/   显示、添加模块和参数
http://127.0.0.1/webansi/tasks/   执行任务

10、授权，把以webansi开头的URL，交给应用处理
# myansible/urls.py
from django.conf.urls import url, include
from django.contrib import admin

urlpatterns = [
    url(r'^admin/', admin.site.urls),
    url(r'^webansi/', include('webansi.urls')),
]
# webansi/urls.py    # 需要新建
from django.conf.urls import url

urlpatterns = [

]

制作首页
因为该项目只有一个应用，这里采用了不正规的做法，将首页交给应用处理
1、 url
# myansible/urls.py
from django.conf.urls import url, include
from django.contrib import admin
from webansi import views

urlpatterns = [
    url(r'^$', views.index, name='index'),
    url(r'^admin/', admin.site.urls),
    url(r'^webansi/', include('webansi.urls')),
]
注意：需要在pycharm中，右击外层的myansible目录，把它标记为source root

2、视图函数
# webansi/views.py
from django.shortcuts import render

def index(request):
    return render(request, 'index.html')

3、模板文件
# mkdir webansi/templates/
# webansi/templates/index.html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Ansible Project</title>
</head>
<body>
测试页面
</body>
</html>
4、启动开发服务器测试
(djenv) [root@room8pc16 myansible]# python manage.py runserver 0:80
5、引入boostrap
6、实现模板继承







